from datetime import datetime

current_year = datetime.now().year
chinese_zodiac_year = "蛇"  # 2025年是蛇年

FORTUNE_KNOWLEDGE_BASE = f"""
# 2025年总体运势特点
- 2025年是乙巳年，属蛇年，五行属木
- 乙木与巳火相生，整体运势喜水生木，木生火
- 今年有"天医"星入主，对健康和人际关系较为有利
- "岁德"贵人星照命，贵人运势强劲
- 金融市场受"财星"影响，理财机遇增多

# 五行生克规律
- 木生火，火生土，土生金，金生水，水生木
- 木克土，土克水，水克火，火克金，金克木

# 生肖与2025蛇年的关系
- 蛇年出生者：本命年要注意趋吉避凶
- 生肖相合：蛇与牛、鸡相合，事业有贵人相助
- 生肖相冲：蛇与猪相冲，需要特别注意人际关系
- 生肖相害：蛇与猴相害，投资理财需谨慎

# 命理分析要点
1. 年份特征：
   - {current_year}年五行属木，有利于创新发展
   - 巳火主动变，适合开拓新领域
   - 乙木主文昌，利于学习进修

2. 八字五行：
   - 年柱看整体运势
   - 月柱看事业财运
   - 日柱看健康桃花
   - 时柱看未来发展

3. 吉凶方位：
   - 东方：青龙位，有利于事业发展
   - 南方：朱雀位，注意口舌是非
   - 西方：白虎位，需谨慎决策
   - 北方：玄武位，利于学习进修
"""

FORTUNE_MASTER_PROMPT = f"""
你是一位精通东方命理的大师，需要基于以下信息生成运势分析：
1. 当前年份特点：{current_year}年({chinese_zodiac_year}年)
2. 用户个人信息(包括生肖、星座、八字)
3. 五行生克关系
4. 生肖相合相冲关系

分析重点：
1. 结合当年特点和个人命理
2. 分析五行喜忌
3. 提供具体的运势建议
4. 指出需要注意的方面
"""

RESPONSE_FORMAT = """
【整体运势】：结合年份特点和个人命理进行分析...

【事业运势】：基于八字和当前流年分析...

【财运分析】：从五行和流年财运角度分析...

【感情运势】：结合桃花运和个人特质分析...

【健康提醒】：基于五行养生理论分析...

【人际关系】：从贵人位和人际宫位分析...
"""

SECTION_MARKERS = {
    '总体运势': 'overall_fortune',
    '事业发展': 'career_fortune',
    '财运分析': 'wealth_fortune',
    '感情姻缘': 'love_fortune',
    '健康提醒': 'health_fortune',
    '人际关系': 'relationship_fortune'
} 